<html>
<head>
  <title>Evernote Export</title>
  <basefont face="Consolas" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303244 (en-US, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: Consolas;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="2215"/>

<div>
<span><div>Browser consists of 3 major contents:</div><ol><li>Rendering Engine</li><li>Javascript Engine</li><li>Http Request Handler</li></ol><div><br/></div><div>Js engine itself executes a code synchronously, then how it is able to process asynchronous events like click of a button?</div><div><br/></div><div>Let us try to understand with an example:</div><div><br/></div><div style="background-image: url(file:///img/blueprint-dark.fd85a7a074ae.png); background-color: rgb(250, 251, 252); margin: 0px 0px 20px; padding: 1em 1em 1em 3.8em; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 5px; border-left-style: solid; border-left-color: rgb(85, 138, 187); overflow: auto; text-shadow: none; direction: ltr; text-align: left; word-spacing: normal; position: relative; counter-reset: linenumber 0; font-weight: normal; font-style: normal; letter-spacing: 0.14px; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; -webkit-text-stroke-width: 0px; background-position: 50% 0%; background-repeat: initial initial;"><div><span style="color: rgb(168, 168, 168);"><span style="font-size: 14px;"><span style="font-family: Consolas, Monaco, 'Andale Mono', monospace;"><br/></span></span></span></div><div><span style="color: rgb(168, 168, 168);"><span style="font-size: 15px;"><span style="font-family: Consolas;"><b>// long running function</b></span></span></span></div><div><span style="color: rgb(168, 168, 168);"><span style="font-size: 15px;"><span style="font-family: Consolas;"><b>function waitThreeSeconds() {</b></span></span></span></div><div><span style="color: rgb(168, 168, 168);"><span style="font-size: 15px;"><span style="font-family: Consolas;"><b>    var ms = 3000 + new Date().getTime();</b></span></span></span></div><div><span style="color: rgb(168, 168, 168);"><span style="font-size: 15px;"><span style="font-family: Consolas;"><b>    while (new Date() &lt; ms){}</b></span></span></span></div><div><span style="color: rgb(168, 168, 168);"><span style="font-size: 15px;"><span style="font-family: Consolas;"><b>    console.log('finished function');</b></span></span></span></div><div><span style="color: rgb(168, 168, 168);"><span style="font-size: 15px;"><span style="font-family: Consolas;"><b>}</b></span></span></span></div><div><span style="color: rgb(168, 168, 168);"><span style="font-size: 15px;"><span style="font-family: Consolas;"><b><br/></b></span></span></span></div><div><span style="color: rgb(168, 168, 168);"><span style="font-size: 15px;"><span style="font-family: Consolas;"><b>function clickHandler() {</b></span></span></span></div><div><span style="color: rgb(168, 168, 168);"><span style="font-size: 15px;"><span style="font-family: Consolas;"><b>    console.log('click event!');   </b></span></span></span></div><div><span style="color: rgb(168, 168, 168);"><span style="font-size: 15px;"><span style="font-family: Consolas;"><b>}</b></span></span></span></div><div><span style="color: rgb(168, 168, 168);"><span style="font-size: 15px;"><span style="font-family: Consolas;"><b><br/></b></span></span></span></div><div><span style="color: rgb(168, 168, 168);"><span style="font-size: 15px;"><span style="font-family: Consolas;"><b>// listen for the click event</b></span></span></span></div><div><span style="color: rgb(168, 168, 168);"><span style="font-size: 15px;"><span style="font-family: Consolas;"><b>document.addEventListener('click', clickHandler);</b></span></span></span></div><div><span style="color: rgb(168, 168, 168);"><span style="font-size: 15px;"><span style="font-family: Consolas;"><b><br/></b></span></span></span></div><div><span style="color: rgb(168, 168, 168);"><span style="font-size: 15px;"><span style="font-family: Consolas;"><b><br/></b></span></span></span></div><div><span style="color: rgb(168, 168, 168);"><span style="font-size: 15px;"><span style="font-family: Consolas;"><b>waitThreeSeconds();</b></span></span></span></div><div><span style="color: rgb(168, 168, 168);"><span style="font-size: 15px;"><span style="font-family: Consolas;"><b>console.log('finished execution');</b></span></span></span></div><div><span style="font-size: 15px;"><span style="font-family: Consolas;"><b><span style="color: rgb(65, 0, 125);"><br/></span></b></span></span></div><div><span style="font-size: 15px;"><span style="font-family: Consolas;"><span style="color: rgb(50, 135, 18);"><b>Output: If something clicked on browser here is sequence occurs.</b></span></span></span></div><div><span style="font-size: 15px;"><span style="font-family: Consolas;"><span style="color: rgb(54, 101, 238);"><b>After 3 sec wait ...</b></span></span></span></div><div><span style="font-size: 15px;"><span style="font-family: Consolas;"><b><span style="color: rgb(50, 135, 18);">finished function</span></b></span></span></div><div><span style="font-size: 15px;"><span style="font-family: Consolas;"><b><span style="color: rgb(50, 135, 18);">finished execution</span></b></span></span></div><div><span style="font-size: 15px;"><span style="font-family: Consolas;"><b><span style="color: rgb(50, 135, 18);">click event!</span></b></span></span></div><div><br/></div></div><div><b><span style="color: rgb(50, 135, 18);"><br/></span></b></div><div><b><span style="color: rgb(50, 135, 18);"><br/></span></b></div><div><span style="color: rgb(28, 51, 135);"><b>Explanation:</b></span></div><div><b><span style="color: rgb(28, 51, 135);"><br/></span></b></div><div>As we know, each function when invoked creates it's own <b>execution context.</b> Here a stack of two execution contexts are created, one global and then waitThreeSeconds.</div><div>JS also maintains a event queue, where all events are stored. So click event is stored in event queue. If there are more than one events, they are stored in this queue.</div><div><br/></div><div><b><span style="color: rgb(255, 0, 0);">JS Engine processes this event queue ONLY when execution context stack is empty called &quot;tick&quot;.</span></b> JS Engine keeps looking for this event queue for events whenever execution context stack is empty and <b>processes these events one by one.</b></div><div><b><br/></b></div><div><b><br/></b></div><div>Now based on explanation above try to see why output of below code is as shown(taken from mozilla.org):</div><div><br/></div><div style="background: url(&quot;../../img/blueprint-dark.fd85a7a074ae.png&quot;) center top rgb(250, 251, 252); margin: 0px 0px 20px; padding: 1em 1em 1em 3.8em; border-width: 0px 0px 0px 5px; border-top-style: initial; border-right-style: initial; border-bottom-style: initial; border-left-style: solid; border-top-color: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: rgb(85, 138, 187); border-image: initial; font-size: 14px; color: rgb(59, 60, 64); overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; text-shadow: none; direction: ltr; text-align: left; word-spacing: normal; tab-size: 4; hyphens: none; position: relative; counter-reset: linenumber 0; font-weight: normal; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: 0.14px; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; -webkit-text-stroke-width: 0px;"><code style="margin: 0px; padding: 0px; border: 0px; font-style: normal; font-weight: inherit; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; color: rgb(59, 60, 64); text-shadow: none; direction: ltr; text-align: left; word-spacing: normal; tab-size: 4; hyphens: none; position: relative;"><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><br/><br/>
  console<span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'this is the start'</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span></code><div>     </div><div>  // stored callback in events queue</div><code style="margin: 0px; padding: 0px; border: 0px; font-style: normal; font-weight: inherit; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; color: rgb(59, 60, 64); text-shadow: none; direction: ltr; text-align: left; word-spacing: normal; tab-size: 4; hyphens: none; position: relative;">  <span style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span> <span style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">cb</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span><br/>
    console<span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'this is a msg from call back'</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><br/>
  <span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">},5000</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span></code><div><br/></div><div>  // stored callback in events queue</div><code style="margin: 0px; padding: 0px; border: 0px; font-style: normal; font-weight: inherit; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; color: rgb(59, 60, 64); text-shadow: none; direction: ltr; text-align: left; word-spacing: normal; tab-size: 4; hyphens: none; position: relative;">  console<span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'this is just a message'</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><br/><br/>
  <span style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">setTimeout</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(0, 119, 170);">function</span> <span style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">cb1</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span> <span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">{</span></code><div>    console<span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'this is a msg from call back1'</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span></div><div>  <span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">,</span> <span style="color: rgb(153, 0, 85);">2000</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span></div><code style="margin: 0px; padding: 0px; border: 0px; font-style: normal; font-weight: inherit; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; color: rgb(59, 60, 64); text-shadow: none; direction: ltr; text-align: left; word-spacing: normal; tab-size: 4; hyphens: none; position: relative;"><br/>
  console<span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">.</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(221, 74, 104);">log</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(102, 153, 0);">'this is the end'</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span><br/><br/></code><div><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">}</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">(</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">)</span><span style="margin: 0px; padding: 0px; border: 0px; color: rgb(153, 153, 153);">;</span></div><div><span style="color: rgb(153, 153, 153);"><br/></span></div><div><span style="color: rgb(65, 173, 28);"><b>OUTPUT:</b></span></div><div><code style="margin: 0px; padding: 0px; border: 0px; font-style: normal; font-weight: inherit; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; color: rgb(59, 60, 64); text-shadow: none; direction: ltr; text-align: left; word-spacing: normal; tab-size: 4; hyphens: none; position: relative;"><br/></code></div><div><span style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">&quot;this is the start&quot;</span></div><div><span style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">&quot;this is just a message&quot;</span><span style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">&quot;this is the end&quot;</span></div><div><span style="color: rgb(45, 79, 201);">(after 5 sec...)</span></div><div><span style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">&quot;this is a msg from call back&quot;</span></div><div><span style="color: rgb(45, 79, 201);">(after 2 sec ...)</span></div><div><span style="margin: 0px; padding: 0px; border: 0px; display: inherit; color: rgb(112, 128, 144);">&quot;this is a msg from call back1&quot;</span></div></div><div><br/></div><div><br/></div><div><b><span style="color: rgb(50, 135, 18);"><br/></span></b></div></span>
</div></body></html> 